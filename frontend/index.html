<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TaskBazaar</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1 class="title">TaskBazaar</h1>
    <input type="text" placeholder="Search for services..." class="search-bar" id="indexSearchBar">
    <h5 class="hero-tagline">
      Empowering small towns — <span class="highlight">All-in-one service platform for small towns and backward areas</span> 
    </h5>
  </header>

  <section class="grid">
    <div class="grid-item" style="--bg: url('vegetables.jpg')" onclick="window.location.href='vendors-list.html?category=Vegetables'">
      <i class="bi bi-basket-fill icon"></i>
      <p>Vegetables</p>
    </div>
    <div class="grid-item" style="--bg: url('electrician.jpeg')" onclick="window.location.href='vendors-list.html?category=electrical'">
      <i class="bi bi-lightning-fill icon"></i>
      <p>Electricians</p>
    </div>
    <div class="grid-item" style="--bg: url('plumber.jpeg')" onclick="window.location.href='vendors-list.html?category=Plumbers'">
      <i class="bi bi-wrench-adjustable icon"></i>
      <p>Plumbers</p>
    </div>
    <div class="grid-item" style="--bg: url('handyman.jpeg')" onclick="window.location.href='vendors-list.html?category=Handymen'">
      <i class="bi bi-hammer icon"></i>
      <p>Handymen</p>
    </div>
  </section>

  <div class="vendor-actions">
    <div class="cta-section">
      <a href="vendors-list.html" class="btn btn-main">View All Vendors</a>
      </div>
    <div class="vendor-join">
      <h3>Are you a service provider?</h3>
      <a href="vendors.html" class="btn btn-outline">Join as Vendor</a>
    </div>
  </div>

  <section class="testimonial-section">
    <h2 class="testimonial-heading">What our users say</h2>
    <div class="testimonial-carousel" id="testimonialCarousel">
      <div class="testimonial-card active">
        <img class="testimonial-img" src="ayesha.png" alt="Ayesha Raza">
        <div class="testimonial-content">
          <h3 class="testimonial-name">Ayesha Raza</h3>
          <p class="testimonial-location">Lahore, Pakistan</p>
          <div class="stars">★★★★★</div>
          <p class="testimonial-text">“Affordable and quick – just what we needed in our town!”</p>
        </div>
      </div>
      <div class="testimonial-card">
        <img class="testimonial-img" src="bilal.png" alt="Bilal Khan">
        <div class="testimonial-content">
          <h3 class="testimonial-name">Bilal Khan</h3>
          <p class="testimonial-location">Rawalpindi, Pakistan</p>
          <div class="stars">★★★★☆</div>
          <p class="testimonial-text">“Booking an electrician took seconds. Totally impressed!”</p>
        </div>
      </div>
      <div class="testimonial-card">
        <img class="testimonial-img" src="zara.png" alt="Zara Imran">
        <div class="testimonial-content">
          <h3 class="testimonial-name">Zara Imran</h3>
          <p class="testimonial-location">Multan, Pakistan</p>
          <div class="stars">★★★★★</div>
          <p class="testimonial-text">“Fast service, polite vendors and a smooth experience.”</p>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <i class="bi bi-house-door-fill" onclick="window.location.href='index.html'" title="Home"></i>
    <i class="bi bi-search" onclick="document.getElementById('indexSearchBar').focus()" title="Search Services"></i>
    <i class="bi bi-check2-square" onclick="alert('My Bookings feature coming soon!')" title="My Bookings (Coming Soon)"></i>
    <i class="bi bi-geo-alt-fill" onclick="window.location.href='map.html'" title="Map"></i>
    <i class="bi bi-person-fill" title="Login/Profile"></i>
  </footer>

  <div class="overlay" id="extraOverlay"></div>
  <div class="login-modal" id="extraInfoModal">
    <h2>Complete your profile</h2>
    <input type="text" id="fullName" placeholder="Full Name" required />
    <input type="text" id="displayName" placeholder="Display Name (e.g., John D.)" required />
    <input type="email" id="email" placeholder="Email Address" required />
    <button type="button" onclick="saveUserDetails()">Submit Profile</button>
    <span class="close-btn" onclick="closeExtraInfoModal()" style="top: 15px; right: 15px; font-size:1.2rem; cursor:pointer;">✖</span>
  </div>

  <div class="overlay" id="loginOverlay"></div>
  <div class="login-modal" id="otpLoginModal">
    <h2>Customer Login</h2>
    <input type="tel" id="phoneInput" placeholder="Enter phone number e.g. +923001234567" required />
    <div id="recaptcha-container" style="margin: 15px auto; display: flex; justify-content: center;"></div>
    <button onclick="sendOTP()">Send OTP</button>
    <div id="otpSection" style="display:none; margin-top: 20px;">
      <input type="text" id="otpInput" placeholder="Enter OTP code" required />
      <button onclick="verifyOTP()">Verify & Login</button>
    </div>
    <span class="close-btn" onclick="closeOtpLoginModal()" style="top: 15px; right: 15px; font-size:1.2rem; cursor:pointer;">✖</span>
  </div>

  <div class="overlay" id="successOverlay" onclick="closeSuccess()"></div>
  <div class="success-modal" id="successModal">
    <span class="close-btn" onclick="closeSuccess()">✖</span>
    <i class="bi bi-check-circle-fill" style="color: #5e0055; font-size: 3rem;"></i>
    <h2 id="successModalTitle">Welcome!</h2>
    <p id="successModalMessage">You are now logged in. Enjoy using TaskBazaar!</p>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script src="firebase.js"></script> <script src="login-otp.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Testimonial Carousel
      const testimonials = document.querySelectorAll('.testimonial-card');
      if (testimonials.length > 0) {
        let currentTestimonial = 0;
        setInterval(() => {
          testimonials[currentTestimonial].classList.remove('active');
          currentTestimonial = (currentTestimonial + 1) % testimonials.length;
          testimonials[currentTestimonial].classList.add('active');
        }, 5000);
      }

      // Index Search Bar functionality
      const indexSearchBar = document.getElementById('indexSearchBar');
      if (indexSearchBar) {
        indexSearchBar.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            const query = indexSearchBar.value.trim();
            if (query) {
              window.location.href = `vendors-list.html?search=${encodeURIComponent(query)}`;
            } else {
              // Optionally, direct to vendors-list.html or do nothing if search is empty
              window.location.href = 'vendors-list.html';
            }
          }
        });
      }
    });

    // Modal closing functions (re-added for clarity from your login-otp.js structure)
    function closeOtpLoginModal() {
        document.getElementById('otpLoginModal').style.display = 'none';
        document.getElementById('loginOverlay').style.display = 'none';
    }
    function closeExtraInfoModal() {
        document.getElementById('extraInfoModal').style.display = 'none';
        document.getElementById('extraOverlay').style.display = 'none';
    }
    // closeSuccess() is already in your login-otp.js, ensure it works for the generic success modal.
    // If not, define it here or ensure login-otp.js's version is accessible.
    function closeSuccess() { // Ensure this is globally accessible if used by multiple modals
      document.getElementById('successOverlay').style.display = 'none';
      document.getElementById('successModal').style.display = 'none';
    }

  </script>
</body>
</html>